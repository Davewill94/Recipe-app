<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/newrecipe.css">
    <link rel="stylesheet" href="/css/headerfooter.css">
    <title>Recipes | New</title>
</head>
<body>
    <%- include('../partials/header') %>
    <%if (edit==="false") {
        buttonValue = 'Create Recipe'
        path='/auth/newRecipe'
        recipe.title = ''
        recipe.image = ''
        recipe.description = ''
        recipe.userId = ''
        recipe.Ingredients=[{name: [''], 
            RecipeIngredients: [{quantity: [''], units: ['']}]
        }]
        recipe.Directions =[{step_number: [1], step: ['']}]
    } else {%>
        <%buttonValue = 'Edit Recipe'
        path='/auth/rcipe.id?_method=PUT'%>
    <%}%>
    <form action="<%=path%>" method="POST">
    <h3>General</h3>
        Title: <input type='text' name='title' value='<%=recipe.title%>' />
        Image Url: <input type='text' name='image' value="<%=recipe.image%>" />
        Description: <input type='text' name='description' value="<%=recipe.description%>" />
        User Id: <input type='number' name='userId' value="<%=recipe.userId%>" />

    <h3>Ingredients</h3>
        <button id='addIngredient' type='button'>Add another ingredient</button>
        <%for (let i=0; i<recipe.Ingredients.length; i++) {%>
            <div id='ingredient'>
                <p>
                Name: <input type='text' name='name' value="<%=recipe.Ingredients[i].name%>"/>
                Amount: <input type='number' name='quantity' value="<%=recipe.Ingredients[i].RecipeIngredients[i].quantity%>" />
                Unit: <input type='text' name='units' value="<%=recipe.Ingredients[i].RecipeIngredients[i].units%>"/>
                </p>
            </div>
        <%}%>
    <h3>Steps</h3>
        <button id='addStep' type='button'>Add another step</button>
        <%for (let i=0; i<recipe.Directions.length; i++) {%>
            <div id="step">
                <p>
                    <input class="stepNum" type='number' name='step_number' value="<%=recipe.Directions[i].step_number%>"/>
                    Step Directions: <input type='text' name='step' size="150" value="<%=recipe.Directions[i].step%>"/>      
                </p>
            </div>
        <%}%>


        <input type='submit' value="<%=buttonValue%>" />
    </form>

    <%- include('../partials/footer') %>


    <script src='/javascript/script.js'></script>
</body>
</html>